<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Login - Smart Attendance System</title>

<style>
/* --- SAME STYLING AS BEFORE --- */
*{margin:0;padding:0;box-sizing:border-box}
body{
    font-family:'Segoe UI',sans-serif;
    background:linear-gradient(135deg,#667eea,#764ba2);
    min-height:100vh;
    display:flex;align-items:center;justify-content:center;
}
.login-container{
    background:white;border-radius:20px;
    box-shadow:0 20px 40px rgba(0,0,0,.15);
    width:100%;max-width:400px;overflow:hidden;
}
.header{
    background:linear-gradient(135deg,#2c3e50,#34495e);
    color:white;text-align:center;padding:30px;
}
.header h1{font-size:2em;margin-bottom:10px;}
.form-container{padding:40px 30px;}
.form-group{margin-bottom:25px;}
.form-group label{font-weight:600;margin-bottom:8px;display:block;}
.form-group input{
    width:100%;padding:15px;border-radius:10px;
    border:2px solid #e9ecef;font-size:16px;
}
.form-group input:focus{
    outline:none;border-color:#667eea;
}
.login-btn{
    width:100%;padding:15px;font-size:16px;font-weight:600;
    color:white;background:linear-gradient(135deg,#667eea,#764ba2);
    border:none;border-radius:10px;cursor:pointer;
}
.login-btn:hover{transform:translateY(-2px);box-shadow:0 10px 20px rgba(0,0,0,.2)}
.text-link{
    text-align:center;margin-top:15px;
}
.text-link a{
    color:#667eea;text-decoration:none;font-weight:bold;
}
.error-message,.success-message{
    padding:12px;border-radius:10px;margin-bottom:15px;text-align:center;display:none;
}
.error-message{background:#f8d7da;color:#721c24;}
.success-message{background:#d4edda;color:#155724;}
</style>

</head>
<body>

<div class="login-container">
    <div class="header">
        <h1>ðŸŽ“ Parents Login</h1>
        <p>Smart Attendance System</p>
    </div>

    <div class="form-container">
        <div id="errorMessage" class="error-message"></div>
        <div id="successMessage" class="success-message"></div>

        <form id="loginForm">
            <div class="form-group">
                <label>Roll Number</label>
                <input type="text" id="rollNumber" required>
            </div>

            <div class="form-group">
                <label>Password</label>
                <input type="password" id="password" required>
            </div>

            <button class="login-btn" type="submit">Login</button>
        </form>

        <div class="text-link">
            ðŸ‘‰ Don't have an account? <a href="admin_sinup.html">Create Account</a>
        </div>
    </div>
</div>

<script>
document.getElementById("loginForm").addEventListener("submit", async (e)=>{
    e.preventDefault();

    let roll = document.getElementById("rollNumber").value;
    let pass = document.getElementById("password").value;

    let formData = new FormData();
    formData.append("roll_number", roll);
    formData.append("password", pass);

    let res = await fetch("http://127.0.0.1:8000/login", {
        method: "POST",
        body: formData
    });

    let data = await res.json();

    if(res.ok){
        localStorage.setItem("token", data.token);
        alert("Login successful!");
        window.location.href = "admin.html?roll_number=" + roll;
    } else {
        document.getElementById("errorMessage").style.display="block";
        document.getElementById("errorMessage").innerText = data.detail;
    }
});
</script>

</body>
</html>
